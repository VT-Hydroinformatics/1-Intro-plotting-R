---
title: "R Notebook"
output: html_notebook
---

## Download and install tidyverse library

We will use the tidyverse a lot this semester. It is a suite of packages that handles plotting and data wrangling efficiently.

You only have to install the library once. You have to load it using the library() function each time you start an R session.

```{r}
#install.packages("tidyverse")
library(tidyverse)

```

## Reading data 

The following line will read in the data we will use for this exercise. Don't worry about this right now beyond running it, we will talk more about it later.

```{r}
Pine <- read_csv("PINE_Jan-Mar_2010.csv") 
SNP <- read_csv("PINE_NFDR_Jan-Mar_2010.csv")
```

![Basic ggplot syntax](images/ggplot syntax-01.png "GGplot syntax")

Let's look at the Pine data, plotting streamflow (the cfs column) by the date (datetime column). We will show the time series as a line.

```{r}
ggplot(data = Pine, aes(x = datetime, y = cfs))+
  geom_line()
```

Now let's make the same plot but show the data as points, using the pch parameter in geom_point() we can change the point type to any of the following:

![R has 25 built in shapes that are identified by numbers. There are some seeming duplicates: for example, 0, 15, and 22 are all squares. The difference comes from the interaction of the \`colour\` and \`fill\` aesthetics. The hollow shapes (0--14) have a border determined by \`colour\`; the solid shapes (15--20) are filled with \`colour\`; the filled shapes (21--24) have a border of \`colour\` and are filled with \`fill\`.](https://d33wubrfki0l68.cloudfront.net/e28a1b57b6622cf67fd8a7e01c6a9955914f8fe9/635be/visualize_files/figure-html/shapes-1.png)

```{r}
ggplot(data = Pine, aes(x = datetime, y = cfs))+
  geom_point(pch = 8)
```

Let's plot the data as a line again, but play with it a bit.

First: make the line blue

Second: change the theme

Third: change the axis labels

Fourth: color by discharge

```{r}

ggplot(data = Pine, aes(x = datetime, y = cfs, color = cfs))+
  geom_line()

```

The SNP dataset has two different streams: Pine and NFDR

We can look at the two of those a couple of different ways

First, make two lines, colored by the stream

```{r}
ggplot(data = SNP, aes(x = datetime,y = cfs, color = StationID)) +
  geom_line()
```

We can also use facets.

You must tell the facet_wrap what variable to use to make the separate panels (facet =). It'll decide how to orient them or you can tell it how. We want them to be on top of each other so we are going to tell it we want 2 rows by setting nrow = 2.

```{r}
ggplot(data = SNP, aes(x = datetime,y = cfs)) +
  geom_line() +
  facet_wrap(facets = "StationID", nrow = 2)
```

You can also use facet_grid() to break your plots up into panels based on two variables. Below we will create a panel for each month in each watershed.

```{r}
ggplot(data = SNP, aes(x = datetime,y = cfs)) +
  geom_line() +
  facet_grid(StationID ~ month, scales = "free")
```

We can look at these data in other ways as well. A very useful way to look at the variation of two groups is to use a boxplot.

Because the data span several orders of magnitude, we will have to log the y axis to see the differences between the two streams. We do that by adding scale_y\_log10()

```{r}
ggplot(data = SNP, aes(x = StationID, y = cfs)) + 
  stat_boxplot()+
  scale_y_log10()
```
